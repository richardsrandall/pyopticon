<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyopticon.majumdar_lab_widgets.mks_ftir_widget &mdash; pyopticon 0.2.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pyopticon
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../capabilities.html">Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_1.html">Tutorial: Using an Existing Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_2.html">Tutorial: Building Your Own Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_3.html">Tutorial: Writing Your Own Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_4.html">Tutorial: Miscellaneous Useful Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../available_widgets.html">Widgets Made by PyOpticon Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyopticon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pyopticon.majumdar_lab_widgets.mks_ftir_widget</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/pyopticon/majumdar_lab_widgets/mks_ftir_widget.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pyopticon.majumdar_lab_widgets.mks_ftir_widget">
<span id="pyopticon-majumdar-lab-widgets-mks-ftir-widget"></span><h1>pyopticon.majumdar_lab_widgets.mks_ftir_widget<a class="headerlink" href="#module-pyopticon.majumdar_lab_widgets.mks_ftir_widget" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyopticon.majumdar_lab_widgets.mks_ftir_widget.</span></span><span class="sig-name descname"><span class="pre">MKSFTIRWidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent_dashboard</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nickname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gas_labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gas_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_logfile_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="../index.html#pyopticon.generic_widget.GenericWidget" title="pyopticon.generic_widget.GenericWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericWidget</span></code></a></p>
<p>A widget representing an MKS multi-gas 2000 FTIR.</p>
<p>This widget doesn’t communicate with the FTIR via serial. The FTIR is controlled by MKS software, which logs data to
a .prn (tab-delimited) file. This widget watches one of those files and reads the gas concentrations in the last line in the file.</p>
<p>One can make this widget extract several gases’ data from the logfile. The gases’ names are passed as one argument. 
A .prn contains many columns, so you pass the respective column indices as another argument.</p>
<p>You can pass in a list of calibration functions for the respective gases to adjust the FTIR’s raw readings. 
It probably makes sense to define the calibration functions using Numpy’s interp function to interpolate between a range of 
calibration points, e.g. ‘ch4_cal_function_lo = lambda x: np.interp(x,[0,514,1024,1430],[0,20,40,60])’.</p>
<p>An example initialization is as follows:
ftir1 = mlw.MKSFTIRWidget(parent_dashboard=dashboard,name=’MKS FTIR’,nickname=’FTIR’,</p>
<blockquote>
<div><p>gas_labels=(‘CH4 (ppm)’,’CO2 (ppm)’,’H2O (%)’,’CO (ppm)’),
gas_columns=(3,15,30,12))</p>
</div></blockquote>
<p>dashboard.add_widget(ftir1,row=2,column=1)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent_dashboard</strong> (<em>richardview.dashboard.RichardViewDashboard</em>) – The dashboard object to which this device will be added</p></li>
<li><p><strong>name</strong> (<em>str</em>) – The name that the widget will be labeled with, and under which its data will be logged, e.g. “Methane Mass Flow Controller”</p></li>
<li><p><strong>nickname</strong> (<em>str</em>) – A shortened nickname that can be used to identify the widget in automation scripts, e.g. “CH4 MFC”</p></li>
<li><p><strong>gas_labels</strong> (<em>list</em>) – The labels of the different gases to be logged. You may want to include units, e.g. ‘CO2 (ppm)’</p></li>
<li><p><strong>gas_columns</strong> (<em>list</em>) – The indices of the columns corresponding to the gases’ concentrations in the logfile</p></li>
<li><p><strong>calibration_functions</strong> (<em>list</em>) – A list specifying calibration functions for each gas; see the description above. If None, just keeps the values in the file.</p></li>
<li><p><strong>default_logfile_path</strong> (<em>str</em><em>, </em><em>optional</em>) – The default path of the FTIR logfile. Can be used to avoid clicking through the file location choosing dialog every time.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_failed_serial_open">
<span class="sig-name descname"><span class="pre">on_failed_serial_open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_failed_serial_open" title="Permalink to this definition"></a></dt>
<dd><p>If the device initialized unsuccessfully, set its readout to ‘No Reading’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.disable_button">
<span class="sig-name descname"><span class="pre">disable_button</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.disable_button" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_handshake">
<span class="sig-name descname"><span class="pre">on_handshake</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_handshake" title="Permalink to this definition"></a></dt>
<dd><p>This function gets called whenever the widget is initialized. If the widget uses a Serial connection, you can assume 
that the serial connection was already initialized successfully. If not, you’ll need to initialize whatever objects are needed 
to update the widget in this method (say, an OEM Python driver).</p>
<p>By default, it just calls on_update(), assuming that the handshake was successful if (and only if) no exception was raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_update">
<span class="sig-name descname"><span class="pre">on_update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_update" title="Permalink to this definition"></a></dt>
<dd><p>“Read from the file and populate the fields.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_serial_close">
<span class="sig-name descname"><span class="pre">on_serial_close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.on_serial_close" title="Permalink to this definition"></a></dt>
<dd><p>When serial is closed, set all readouts to ‘No Reading’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget._update_file_to_watch">
<span class="sig-name descname"><span class="pre">_update_file_to_watch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget._update_file_to_watch" title="Permalink to this definition"></a></dt>
<dd><p>Prompt the user to select a new file to watch.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.construct_serial_emulator">
<span class="sig-name descname"><span class="pre">construct_serial_emulator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyopticon.majumdar_lab_widgets.mks_ftir_widget.MKSFTIRWidget.construct_serial_emulator" title="Permalink to this definition"></a></dt>
<dd><p>No serial emulator is needed for this device, since its normal operation doesn’t assume any hardware is present. Returns None.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>NoneType</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Richard Randall.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>